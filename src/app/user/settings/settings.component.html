<div fxLayout="row wrap" fxLayoutAlign="center start">
  <mat-card fxFlex.gt-sm="55" fxFlex="100">
    <mat-tab-group>
      <mat-tab label="用户信息设置">
        <form fxLayout="column" novalidate [formGroup]="userInfoForm">
          <mat-form-field>
            <input matInput placeholder="用户名" required formControlName="username" />
            <mat-error *ngIf="checkErrorMatch(userInfoForm, 'username', 'required')">用户名为必填项</mat-error>
            <mat-error *ngIf="checkErrorMatch(userInfoForm, 'username', 'pattern')">用户名只能由字母、数字和下划线组成</mat-error>
            <mat-error *ngIf="checkErrorMatch(userInfoForm, 'username', 'minlength')">用户名最少2个字符</mat-error>
            <mat-error *ngIf="checkErrorMatch(userInfoForm, 'username', 'maxlength')">用户名最多20个字符</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="用户昵称" formControlName="nickname" />
            <mat-error *ngIf="checkErrorMatch(userInfoForm, 'nickname', 'maxlength')">用户昵称最多50个字符</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="注册邮箱" required formControlName="email" />
            <mat-error *ngIf="checkErrorMatch(userInfoForm, 'email', 'required')">邮箱是必填项</mat-error>
            <mat-error *ngIf="checkErrorMatch(userInfoForm, 'email', 'pattern')">邮箱格式不正确</mat-error>
          </mat-form-field>
          <div class="error-line" *ngIf="isShowUserInfoError && userInfoForm.valid"><mat-error>{{userInfoErrorMessage || '该用户名已被注册'}}</mat-error></div>
          <div class="btn-line">
            <button mat-raised-button color="primary" [disabled]="userInfoForm.invalid" (click)="saveUserInfo()" *ngIf="!isUserInfoSubmitting">保存</button>
            <button *ngIf="isUserInfoSubmitting" [disabled]="isUserInfoSubmitting" mat-raised-button color="primary"><span class="btn-spinner-wrapper"><mat-spinner diameter="18" color="primary"></mat-spinner> 保存中...</span></button>
            <button mat-raised-button (click)="resetUserInfo()">重置</button>
          </div>
        </form>
      </mat-tab>
      <mat-tab label="密码设置">
        <form fxLayout="column" novalidate [formGroup]="passwordForm">
          <mat-form-field>
            <input matInput type="password" required placeholder="请输入原密码" formControlName="oldPassword" />
          </mat-form-field>
          <mat-form-field>
            <input matInput type="password" required autocomplete="off" placeholder="请输入新密码" formControlName="newPassword" />
          </mat-form-field>
          <mat-form-field>
            <input matInput type="password" required autocomplete="off" placeholder="请再次输入新密码" formControlName="confirmNewPassword" />
          </mat-form-field>
          <div class="error-line" *ngIf="isShowPasswordError && passwordForm.valid"><mat-error>{{passwordErrorMessage || '输入的原密码不正确'}}</mat-error></div>
          <div class="btn-line">
            <button mat-raised-button color="primary" [disabled]="passwordForm.invalid" (click)="savePassword()" *ngIf="!isPasswordSubmitting">保存</button>
            <button *ngIf="isPasswordSubmitting" [disabled]="isPasswordSubmitting" mat-raised-button color="primary"><span class="btn-spinner-wrapper"><mat-spinner diameter="18" color="primary"></mat-spinner> 保存中...</span></button>
            <button mat-raised-button (click)="resetPasswordForm()">重置</button>
          </div>
        </form>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
</div>
